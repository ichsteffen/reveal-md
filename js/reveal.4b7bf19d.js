(function(e){function t(t){for(var r,o,i=t[0],l=t[1],d=t[2],h=0,_=[];h<i.length;h++)o=i[h],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&_.push(a[o][0]),a[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);c&&c(t);while(_.length)_.shift()();return s.push.apply(s,d||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var l=n[i];0!==a[l]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={reveal:0},s=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/reveal-md/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var c=l;s.push([2,"chunk-vendors"]),n()})({0:function(e,t){},2:function(e,t,n){e.exports=n("dd15")},3:function(e,t){},4471:function(e,t,n){},6267:function(module,__webpack_exports__,__webpack_require__){"use strict";var _reveal_d__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("4471"),_reveal_d__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_reveal_d__WEBPACK_IMPORTED_MODULE_0__),hyperpug__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("5ca7"),showdown__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("339e"),showdown__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(showdown__WEBPACK_IMPORTED_MODULE_2__),hyperscript__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("c004"),hyperscript__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(hyperscript__WEBPACK_IMPORTED_MODULE_3__),gray_matter__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("85be"),gray_matter__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(gray_matter__WEBPACK_IMPORTED_MODULE_4__);const options={css:["css/reveal.css"],js:["js/reveal.js",{async:!0,src:"plugin/highlight/highlight.js"}]};class RevealMd{constructor(e="https://cdn.jsdelivr.net/npm/reveal.js@3.8.0/",t={}){this.cdn=e,this.raw=[[]],this.queue={ready:[]},this._headers={},this.revealOptions=JSON.parse(JSON.stringify(options)),t.css&&this.revealOptions.css.push(...t.css),t.js&&this.revealOptions.js.push(...t.js),window.revealMd=this;for(const n of this.revealOptions.css)document.body.appendChild(Object.assign(document.createElement("link"),{class:"reveal-css",href:this.cdn+n,rel:"stylesheet",type:"text/css"}));document.body.appendChild(Object.assign(document.createElement("link"),{id:"reveal-theme",class:"reveal-css",href:this.cdn+"css/theme/white.css",rel:"stylesheet",type:"text/css"}));for(let n of this.revealOptions.js)if("string"===typeof n)document.body.appendChild(Object.assign(document.createElement("script"),{class:"reveal-js",type:"text/javascript",src:this.cdn+n}));else{const{async:e,src:t}=n;document.body.appendChild(Object.assign(document.createElement("script"),{class:"reveal-js",async:e,type:"text/javascript",src:this.cdn+t}))}window.addEventListener("load",()=>{const e=window.Reveal;e&&(e.initialize(),this.onReady(()=>{this.queue.ready.length>0&&(this.queue.ready.forEach(t=>t(e)),e.slide(-1,-1,-1),e.sync())}))})}getMdConverter(){const e=new showdown__WEBPACK_IMPORTED_MODULE_2___default.a.Converter;return e.setFlavor("github"),window.revealMdPlugins&&window.revealMdPlugins.markdown&&Object.values(window.revealMdPlugins.markdown).forEach(t=>e.addExtension(t)),t=>e.makeHtml(t)}mdConvert(e){return this.getMdConverter()(e)}pugConvert(e){const t=this.getMdConverter(),n={markdown:e=>{return t(e)},...window.revealMdPlugins&&window.revealMdPlugins.pug?window.revealMdPlugins.pug:{}};return hyperpug__WEBPACK_IMPORTED_MODULE_1__["a"].compile({filters:n})(e)}getHeaders(){return this._headers}setHeaders(e){this.onReady(t=>{e.theme&&(document.getElementById("reveal-theme").href=this.cdn+`css/theme/${e.theme}.css`),Array.from(document.getElementsByClassName("reveal-css")).forEach(e=>{const t=e;t.href.startsWith(this.cdn)||(t.href=this.cdn+t.href)}),Array.from(document.getElementsByClassName("reveal-js")).forEach(e=>{const t=e;t.src.startsWith(this.cdn)||(t.src=this.cdn+t.src)}),t&&t.configure(e)}),this._headers=e}update(markdown){const{data:data,content:content}=gray_matter__WEBPACK_IMPORTED_MODULE_4___default()(markdown);this.setHeaders(data);const setBody=()=>{let reverseOffset=0;const newRaw=content.split(/\r?\n===\r?\n/g).map((el,x)=>{const sectionRaw=this.parseSlide(el);if(sectionRaw.comment){const lines=sectionRaw.comment.split("\n");for(const line of lines){if(["hidden","global"].includes(line)){if("global"===line){const global=document.getElementById("global");if(global){let el=global.querySelector("#global--main");el||(el=document.createElement("div"),el.id="global--main",global.appendChild(el)),el.innerHTML=sectionRaw.content,Array.from(el.getElementsByTagName("script")).forEach(el=>{eval(el.innerHTML)})}}return reverseOffset++,null}if(line.startsWith("ref=")){const global=document.getElementById("global");if(global){const ref=line.split("=")[1];let el=global.querySelector(`#global--${CSS.escape(ref)}`);el||(el=document.createElement("div"),el.id=`global--${CSS.escape(ref)}`);const url=new URL("/api/data",location.origin);url.searchParams.set("filename",ref),fetch(url.href).then(e=>e.text()).then(r=>{r&&(el=el,el.innerHTML=this.parseSlide(r).content,global.appendChild(el),Array.from(el.getElementsByTagName("script")).forEach(el=>{eval(el.innerHTML)}))})}}}}return x-=reverseOffset,this.raw[x]=this.raw[x]||[],el.split(/\r?\n--\r?\n/g).map((e,t)=>{const n=this.parseSlide(e);if(!this.raw[x][t]||this.raw[x][t]&&this.raw[x][t].raw!==e){const e=document.createElement("div");e.className="container",e.innerHTML=n.content;let r=this.getSlide(x,t),a=this.getSlide(x);if(a&&r){const t=r.getElementsByClassName("container");Array.from(t).forEach(e=>e.remove()),r.appendChild(e)}else{const t=document.createElement("section");if(t.append(e),a)a.appendChild(t);else{const e=document.createElement("section");e.append(t),document.querySelector(".reveal .slides").appendChild(e)}}Array.from(e.querySelectorAll("pre code:not(.hljs)")).forEach(e=>{window.hljs&&window.hljs.highlightBlock(e)})}return n})}).filter(e=>null!==e);this.raw.map((e,t)=>{if(e.map((n,r)=>{const a=e.length-r-1;if(!newRaw[t]||!newRaw[t][a]){const e=this.getSlide(t,a);e&&e.remove()}}),!newRaw[t]){const e=this.getSlide(t);e&&e.remove()}}),this.raw=newRaw};setBody()}onReady(e){const t=window.Reveal;t&&t.isReady()?e(t):this.queue.ready.push(e)}once(e,t){const n=window.Reveal;if(n&&n.isReady){const r=()=>{t(),n.removeEventListener(e,r)};n.addEventListener(e,r)}else this.queue.ready.push(t)}parseSlide(e){const t=e;let n="";const r=[],a=[];let s=!0;for(const l of e.split("\n")){if(s=!0,0===a.length&&l.startsWith("// ")&&(r.push(l.substr(3)),s=!1),n&&l.startsWith("```"))break;0===a.length&&l.startsWith("```")&&(n=l.substr(3),s=!1),s&&a.push(l)}n=n||"markdown";const o=r.join("\n");let i=a.join("\n")||e;switch(n){case"markdown":i=this.mdConvert(i);break;case"html":break;case"pug":i=this.pugConvert(i);break;default:const e=hyperscript__WEBPACK_IMPORTED_MODULE_3___default()("pre");e.innerText=i,i=e.outerHTML}return{lang:n,comment:o,content:i,raw:t}}buildSlide(e){const t=[];if(e.comment)for(const r of e.comment.split("\n"))t.push(`// ${r}`);const n="```";"markdown"!==e.lang&&t.push(`${n}${e.lang||"html"}`);for(const r of e.content.split("\n"))t.push(r);return"markdown"!==e.lang&&t.push(n),t.join("\n")}getSlide(e,t){const n=document.querySelectorAll(".slides > section"),r=n[e];return"number"===typeof t?r?Array.from(r.children).filter(e=>"SECTION"===e.tagName.toLocaleUpperCase())[t]:void 0:r}}__webpack_exports__["a"]=RevealMd},dd15:function(e,t,n){"use strict";n.r(t);var r=n("6267"),a=n("b383"),s=n.n(a);const o=new r["a"]("/reveal-md/reveal.js/"),i=new URL(location.href).searchParams;i.get("q")?fetch(i.get("q")).then(e=>e.text()).then(e=>{o.update(e)}):i.get("filename")?fetch("/api/data?"+s.a.stringify({filename:i.get("filename")})).then(e=>e.text()).then(e=>{o.update(e)}):o.update("---\n# Yaml front matter is allowed.\ntitle: reveal-md\ntheme: solarized  # try solarized, serif or white\n---\n// global\n```pug\nstyle.\n  h1, h2, h3, h4, h5, h6 {\n    text-transform: uppercase !important;\n  }\n  \n  p, li {\n    font-size: 2rem;\n  }\n  \n  code {\n    color: red;\n  }\n```\n===\n\n# Reveal-MD\n\nReveal.js x Markdown (Showdown.js) editor and CLI.\n\n--\n\n- Customizable by editing [/src/reveal.ts](/src/reveal.ts), and add your Showdown / HyperPug plugins here. You might use <https://github.com/patarapolw/indented-filter> to create plugins.\n\n--\n\n- Global scripting `<script><\/script>` and styling `<style></style>` is also supported in slides marked with\n\n```markdown\n// global\ncontent (Pug or HTML or extended Markdown)\n```\n\n- The slides marked with `// global` or `// hidden` will be hidden.\n\n--\n\nHTML is also supported\n\n--\n```html\n<small>Small character</small>\n```\n\n===\n\n## Installation\n\n```\ngit init\ngit submodule add https://github.com/patarapolw/reveal-md.git\nnpm i ./reveal-md\n```\n\n--\n\nOr simply (but you won't be able to edit it.)\n\n```\nnpm i https://github.com/patarapolw/reveal-md.git\n```\n\n===\n\n## Usage\n\n```\nreveal-md [options] <filename>\n\nRead file in reveal-md\n\nPositionals:\n  filename  Path to the file to read\n\nOptions:\n  --version    Show version number                                     [boolean]\n  --edit, -e   Edit the file in editor                                 [boolean]\n  --media, -m  Path to media folder                                     [string]\n  --no-media   No media should be loaded                               [boolean]\n  --help       Show help                                               [boolean]\n```\n\n===\n\n## Adding media to reveal-md\n\nBy default, media can be put in the folder `media/` alongside the `*.md` file. The media can be referenced using the URL `/media/<FILENAME>`. Can be disabled using `--no-media` flag.\n\n===\n\n## Save as HTML (and associated assets folder)\n\nThis is best done by [downloading complete web page, in associated web browser](https://www.makeuseof.com/tag/save-complete-webpage-offline-reading/).\n\nUsing web crawlers, like <https://github.com/website-scraper/node-website-scraper> won't work, because some JavaScript in Reveal.js is dynamically injected.\n\n===\n\n## Online viewer\n\nYou can do it at <https://patarapolw.github.io/reveal-md/reveal.html?q=\\<YOUR_URL_HERE>>\n\n===\n\n## Duplicated projects\n\n- Sorry, I have created duplicates at \n  - <https://github.com/patarapolw/reveal-editor>\n  - <https://github.com/patarapolw/reveal-md-server>\n\n===\n\n## Contributions\n\n- Please send suggestions at <https://github.com/patarapolw/reveal-md/issues>\n")}});
//# sourceMappingURL=reveal.4b7bf19d.js.map